<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<html>
<head>
<meta charset="UTF-8">
<title>Rooms</title>
<link href="/css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/js/jquery.min.js"></script>
<!-- Custom Theme files -->
<link rel="stylesheet" href="/css/font-awesome.css">
<link href="/css/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- Custom Theme files -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!--webfont-->
<link href='http://fonts.useso.com/css?family=Raleway:400,100,200,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
<link href='http://fonts.useso.com/css?family=Roboto:400,900italic,900,700italic,700,500italic,500,400italic,300,300italic,100italic,100' rel='stylesheet' type='text/css'>
<script src="/js/easyResponsiveTabs.js" type="text/javascript"></script>
		    <script type="text/javascript">
			    $(document).ready(function () {
			        $('#horizontalTab').easyResponsiveTabs({
			            type: 'default', //Types: default, vertical, accordion           
			            width: 'auto', //auto or any width like 600px
			            fit: true   // 100% fit in a container
			        });
			    });
</script>
		<script src="/js/jquery.easydropdown.js" type="text/javascript"></script>
	<!---strat-date-piker---->
<link rel="stylesheet" href="/css/jquery-ui.css" />
<script src="/js/jquery-ui.js"></script>
		  <script>
				  $(function() {
				    $( "#datepicker,#datepicker1" ).datepicker();
				  });
		  </script>
<!---/End-date-piker---->

    <style>
        td{border:0px;padding: 12px;}

    /*分页start*/

    /*分页end*/

    </style>
</head>
<body>
<!-- header-starts -->
<div class="page-header">
	<div class="container">
		<div class="page-header-info">
			<div class="page-header-info-head text-center">
				<a href="index.html"><h1>i旅行</h1></a>
			</div>
			<!-- start h_menu4 -->
			<div class="h_menu4">
				<a class="toggleMenu" href="">Menu</a>
				<ul class="nav p-nav">
					<li class="active"><a href="/jump/jumpHome">首页</a></li>
					<li><a href="/hotel/getHotelList">酒店</a>
						<ul>
							<li><a href="/hotel/getHotelList">酒店列表</a></li>
							<li><a href="/jump/jumpRooms">房间类型</a></li>
							<li><a href="addOrder.html">房间预定</a></li>
							<li><a href="booking.html">大城市的酒店</a></li>
							<li><a href="booking.html">小城市的酒店</a></li>
						</ul>
					</li>
					<li><a href="/jump/jumpPayment">机票</a>
						<ul>
							<li><a href="/jump/jumpPayment">付款</a></li>
							<li><a href="/jump/jumpSearch">搜索</a></li>
							<li><a href="/jump/jumpSearch">列表</a></li>
						</ul>
					</li>
					<li><a href="/jump/jumpDestination" class="root">旅游</a>
						<ul>
							<li><a href="/jump/jumpDestination">菲力宾</a></li>
							<li><a href="/jump/jumpDestination">巴西</a></li>
							<li><a href="/jump/jumpDestination">纽约</a></li>
						</ul>
					</li>
					<li><a href="/jump/jumpContact">联系</a></li>
				</ul>
				<script type="text/javascript" src="/js/nav.js"></script>
			</div>
			<!-- end h_menu4 -->
		</div>
	</div>
</div>
<!-- header-ends -->
	<!-- content-section-starts -->
<div class="main_bg">
<div class="container">

    <!--房间列表-->
	<div class="room-main">
		<div class="room-content">
			<div class="room">
				<!--<h4>山景房</h4>-->
				<h4 th:text="${hotel.hotelName}"></h4>    <!--显示酒店名字-->
				<p class="para">Lorem Ipsum的段落有许多变化，但是大多数都会通过注入幽默或者看起来不太可信的随机单词进行某种形式的改变。如果你打算使用一段Lorem Ipsum，你需要确保在文本中间没有隐藏任何尴尬。互联网上的所有Lorem Ipsum生成器都会重复出现。</p>
			</div>

            <div class="grids_of_2">
				<!--<form id="booking_time" action="/order/findOrder">-->
            <table cellpadding="0" cellspacing="0" id="roomTypeTal" style="text-align: center" width="100%">
                <tr style="background: lightblue;font-style: italic;color: orange">
                    <td>房型</td>
                    <td>床型</td>
                    <td>早餐</td>
                    <td>宽带</td>
                    <td>价格</td>
                    <td>操作</td>
                </tr>
                <tr th:each="room : ${pageBean.list}">

                    <td>
                        <img width="50px" height="50px" src="/images/r-pic4.jpg" alt="房型图片"/><br><span th:text="${room.roomTitle}"></span>
                    </td>
                        <!--<td th:text="${room.roomBedTypeId}"></td>-->
                        <td th:if="${room.roomBedTypeId} == 1">双床</td>
                        <td th:if="${room.roomBedTypeId} == 2">大床</td>
                        <td th:if="${room.roomBedTypeId} == 3">多床</td>

                        <!--<td th:text="${room.isHavingBreakfast}"></td>-->
                        <td th:if="${room.isHavingBreakfast}==1">包早餐</td>
                        <td th:if="${room.isHavingBreakfast}!=1">无</td>

                        <td>免费wifi</td>
                        <td>￥<span th:text="${room.roomPrice}"></span></td>
                        <td><input type="button" class="booking" value="预定" style="background: orange"></td>
                    <input name="id" th:value="${room.id}" type="hidden" >
                </tr>
            </table>

            </div>

		<!--分页start-->
            <form action="/rooms/findRoomsByHotelId">
			<div id="record">
				共 <span th:text="${pageBean.totalCount }"></span> 条记录
				<span th:text="${pageBean.pageIndex }"></span>/<span th:text="${pageBean.totalPage }"></span>页



				<span style="margin-left: 358px;" th:if="${pageBean.pageIndex > 1}">
				<a href="javascript:homePage(document.forms[1],1);">首页</a>
                <!--forms[1]表示当前页面的第2个表单-->

			<a href="javascript:page_nav_up(document.forms[1]);" style="margin-left: 10px;" d>上一页</a>
				</span>


				<span style="margin-left: 6px;" th:if ="${pageBean.pageIndex < pageBean.totalPage } " >
				<a href="javascript:page_nav_down(document.forms[1]);" style="margin-left: 10px;">下一页</a>
				<a href="javascript:tailPage(document.forms[1]);" style="margin-left: 10px;">最后一页</a>
			</span>
			</div>

			<input type="hidden" name="pageIndex" th:value="${pageBean.pageIndex}">
			<input type="hidden" name="totalPage" th:value="${pageBean.totalPage}">
			<input type="hidden" name="hotelId" th:value="${hotelId}">
            </form>
		<!--分页end-->

		</div>
        <!--右边-->
		<div class="sidebar">
			<ul class="s_nav">
                <form id="booking_time" action="/order/findRoomInfo">
                <li  class="span1_of_1 left">
                    <h5>入住时间</h5>
                    <div class="book_date">
                            <input class="date" id="comeInDate" name="checkInDate" type="date" placeholder="请输入入住时间">
                    </div>
                </li>
                <li  class="span1_of_1 left">
                    <h5>退房时间</h5>
                    <div class="book_date">
                            <input class="date" id="leaveDate" name="checkOutDate" type="date" placeholder="请输入退房时间" >
                    </div>
                </li>
                <input type="hidden" id="loginUser" th:value="${session.loginUser}">
                </form>

				<li><a href="#">Etiam malesuada leo ornare</a></li>
				<li><a href="#">Sed eu magna sed lorem tincidunt</a></li>
				<li><a href="#">Proin id diam eleifend neque auctor scelerisque.</a></li>
			</ul>
			<h4>我们接受</h4>
			<ul class="s_nav1">
				<li><a class="icon1" href="#"></a></li>
				<li><a class="icon2" href="#"></a></li>
				<li><a class="icon3" href="#"></a></li>
				<li><a class="icon4" href="#"></a></li>
			</ul>
		</div>
		<div class="clearfix"></div>
	</div>
</div>
</div>	
	<!-- content-section-ends -->
	<!-- footer-section-starts -->
	<div class="footer">
		<div class="copy-rights text-center">
			<p>Copyright &copy; 2015.Company name All rights reserved.More Templates <a href="http://www.cssmoban.com/" target="_blank" title="ģ��֮��">ģ��֮��</a> - Collect from <a href="http://www.cssmoban.com/" title="��ҳģ��" target="_blank">��ҳģ��</a></p>
		</div>
	</div>

	<!-- footer-section-ends -->................

</body>
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript">
    <!--分页start-->
    function page_nav_down(frm){
        frm.pageIndex.value = new Number(frm.pageIndex.value)+1;
        frm.submit();
    }
    function page_nav_up(frm){
        frm.pageIndex.value = new Number(frm.pageIndex.value)-1;
        frm.submit();
    }
    function homePage(frm){
        frm.pageIndex.value = 1;
        frm.submit();
    }
    function tailPage(frm){
        frm.pageIndex.value = frm.totalPage.value;
        frm.submit();
    }
    <!--分页end-->
    $(function () {
        /**
         * 规范入住日期
         */
        $("#comeInDate").blur(function () {
            var comeInDate = $("#comeInDate").val();
            if(comeInDate==''){
                alert("入住日期不能为空");
                return;
            }
            //这样设计只比较年月日
            if(new Date(new Date(comeInDate).toLocaleDateString()) < new Date(new Date().toLocaleDateString())){
                alert("入住时间不能小于当前时间");
                $("#comeInDate").val("");
                return;
            }
        });
        /**
         * 规范离开日期
         */
        $("#leaveDate").blur(function () {
            var comeInDate = $("#comeInDate").val();
            var leaveDate = $("#leaveDate").val();
            if(comeInDate==''){
                alert("请先选择入住日期");
                $("#leaveDate").val("");
                return;
            }
            if(leaveDate==''){
                alert("离开日期不能为空");
                return;
            }
            if(comeInDate >= leaveDate){
                alert("离开时间必须大于入住时间");
                $("#leaveDate").val("");
                return;
            }
            var _comeInDate = new Date(comeInDate);
            var _leaveDate = new Date(leaveDate);
            var days = parseInt((_leaveDate.getTime() - _comeInDate.getTime())/ (1000 * 60 * 60 * 24));
            //预订天数不能超过30天
            if(days>30){
                alert("预订天数不能超过30天");
                $("#leaveDate").val("");
                return;
            }
        });
        /**
         * 点击预定按钮
         */
        $(".booking").click(function () {
            // 提交  如未登陆用户显示登陆用户页面
            var loginUser= $("#loginUser").val();
            if (loginUser == '' || loginUser == null){
                alert("你还没登录，不能预定，请先登录！");
                location.href="/jump/jumpLogin"
                return;
            }
            var roomTypeId = $(this).parent().next().val();
            $("#booking_time").append("<input type='hidden' value='"+roomTypeId+"' name='id'>");
            var comeInDate = $("#comeInDate").val();
            var leaveDate = $("#leaveDate").val();
            if(comeInDate=='' || leaveDate==''){
                alert("入离日期不能为空");
                return;
            }
            $("#booking_time").submit();
        })
        function roomid(obj){
            var $obj = $(obj);
            var hotelId = $obj.find("input:eq(0)").val();
            $("#roomid").append("<input type='hidden' value='"+hotelId+"' name='hotelId'>");
            $("#roomid").submit();
        }
        
        
        
    })
    


</script>
</html>